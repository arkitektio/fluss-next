mutation CreateRun($assignation: ID!, $flow: ID!, $snapshot_interval: Int!) {
  # Start a run on fluss
  createRun(
    input: {
      assignation: $assignation
      flow: $flow
      snapshotInterval: $snapshot_interval
    }
  ) {
    id
  }
}

mutation CloseRun($run: ID!) {
  # Start a run on fluss
  closeRun(input: { run: $run }) {
    id
  }
}

mutation Snapshot($run: ID!, $events: [ID!]!, $t: Int!) {
  # Snapshot the current state on the fluss platform
  snapshot(input: { run: $run, events: $events, t: $t }) {
    id
  }
}

mutation Track(
  $reference: String!
  $run: ID!
  $t: Int!
  $caused_by: [ID!]!
  $kind: RunEventKind!
  $value: EventValue
  $exception: String
  $message: String
  $source: String!
  $handle: String!
) {
  # Track a new event on the fluss platform
  track(
    input: {
      run: $run
      kind: $kind
      value: $value
      exception: $exception
      causedBy: $caused_by
      t: $t
      reference: $reference
      message: $message
      source: $source
      handle: $handle
    }
  ) {
    id
    kind
    value
    causedBy
  }
}
